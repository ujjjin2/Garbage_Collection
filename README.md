# 가비지컬렉션
#### ■ 가비지컬렉션이란?
- 자바의 메모리 관리 방법 중 하나로 JVM (자바 가상머신)의 Heap 영역에서 *동적으로 할당했던 메모리* 중 *필요 없게 된 메모리 객체(garbage)를 모아 주기적으로 제거*하는 프로세스
- C/C++에서는 가비지 컬렉션 x -> 프로그래머가 수동으로 메모리 할당과 해제를 직접 해줘야 됨
- 반면, 자바에서는 가비지 컬렉터가 관리를 대행 -> 한정된 메모리를 효율적으로 사용할 수 있음
- 또한, 개발자의 입장에서 메모리 관리, 메모리 누수(memory leak)문제에 대해 관리하지 않아도 되어 오롯이 *개발에만 집중* 할 수 있다는 장점이 있음

#### [ 예시 ] 
<pre><code>for (int i = 0; i < 10000; i++) {
  NewObject obj = new NewObject();  
  obj.doSomething();
}</code></pre>
- NewObject 객체는 루프가 끝나고 루프 밖에서는 더이상 사용할 일 x
- 이런 객체들이 메모리를 계속 점유하고 있다면, 다른 코드를 실행하기 위한 메모리 자원 지속적으로 줄어든다.
- 가비지 컬렉션 (GC)이 한번 쓰이고 버려지는 객체들을 주기적으로 비워줌으로써 한정된 메모리를 효율적으로 사용할 수 있게 해줌

> 가비지 컬렉션의 단점
> 자동으로 처리해준다 해도 메모리가 언제 해제되는지 정확하게 알 수 x
> 가비지 컬렉션이 동작하는 동안 <code>다른동작을 멈추기</code> 떄문에 <code>오베헤드</code> 발생 -> Stop-The-World
>> STW(Stop The World)
>> - GC를 수행하기 위해 JVM이 프로그램 실행을 멈추는 현상
>> - GC가 작동하는 동안 GC와 관련 Thread를 제외한 모든 Thread는 멈추게 되어 서비스에 차질  => 이 시간을 최소화 시키는 것이 쟁점

GC 최적화 작업 : GC 튜닝

### ■ 가비지컬렉션 대상
가비지 컬렉션은 어떤 object를 Garbage로 판단해서 지울까?
<p>
가비지 컬렉션은 특정 객체가 garbage인지 아닌지 판단하기 위해서 도달성, 도달 능력이라는 개념을 적용<p>
- 객체에 레퍼런스가 있다, 객체가 참조되고 있는 상태 : Reachable<p>
- 객체에 유효한 레퍼런스가 없다, 객체가 참조되고 있지 않은 상태(GC의 대상) : Unreachable

### ■ 가비지컬렉션 청소 방식
Mark-Sweep : 다양한 GC에서 사용되는 객체를 솎아내는 내부 알고리즘<p>
가비지 컬렉션이 동작하는 아주 기초적인 청소 과정 -> 가비지 컬렉션이 될 대상 객체를 *식별(Mark)* 하고 *제거(Sweep)* 하며 제거되어 파편화된 메모리 영역을 앞으로부터 *채워나가는 작업(Compaction)* 을 수행된다.
- Mark 과정 : 먼저 <code>Root Space</code>로부터 그래프 순회를 통해 연결된 객체들을 찾아내어 각각 어떤 객체를 참조하고 있는지 찾아서 마킹한다.



